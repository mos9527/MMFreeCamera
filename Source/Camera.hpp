#include "Common.h"
struct Camera {
	Math::Vec3<float> position;
	Math::Vec3<float> focus;
	float rotation;
	float unk1;
	float unk2;
	float verticalFov;
	float horizontalFov;
	float unk3;
	float unk4;
	Math::Vec3<float> ident; // is it really?
};

namespace MegaMix {
	SIG_SCAN(
		sigUpdateCamera,
		0x1402FA9F0,
		"\x48\x8B\xC4\x55\x48\x8D\x68\xE8\x48\x81\xEC\x00\x00\x00\x00\x0F\x29\x70\xE8\x0F\x29\x78\xD8\x44\x0F\x29\x40\x00\x44\x0F\x29\x48\x00\x44\x0F\x29\x50\x00\x48\x8B\x05\x00\x00\x00\x00\x48\x33\xC4\x48\x89\x45\xB0\x48\x8D\x4C\x24\x00\x44\x0F\x28\xCA\x44\x0F\x28\xC1\xE8\x00\x00\x00\x00\x48\x8D\x4C\x24\x00\xE8\x00\x00\x00\x00\xE8\x00\x00\x00\x00\xF2\x0F\x10\x18\x8B\x40\x08\x89\x45\xA8\xE8\x00\x00\x00\x00\x0F\x28\xF0\xE8\x00\x00\x00\x00\x44\x0F\x28\xD0\xE8\x00\x00\x00\x00\x0F\x28\xCB\xF3\x0F\x11\x5C\x24\x00\x0F\xC6\xC9\x55\x48\x8D\x54\x24\x00\xF3\x0F\x11\x4C\x24\x00\x48\x8D\x0D\x00\x00\x00\x00",
		"xxxxxxxxxxx????xxxxxxxxxxxx?xxxx?xxxx?xxx????xxxxxxxxxxx?xxxxxxxxx????xxxx?x????x????xxxxxxxxxxx????xxxx????xxxxx????xxxxxxxx?xxxxxxxx?xxxxx?xxx????"
	);
	auto inline camera = (Camera*)readLongLEAAddress((uint64_t)sigUpdateCameraAddr + 0x8D);
}

class CameraWindow : BaseWindow {
public:	
	float rotH;
	float rotV;

	float normalSpeed = 0.01;
	float acceleratedSpeed = 0.05;

	bool overrideCamera = false;	

	int prevPressed = 0;

	void OnFrame();
	void OnImGui();
	void OnInit();
} inline cameraWindow;
